<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/axios@1.6.7/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script>
        async function signup(){
            const username = document.getElementById("signup-username").value;
            const password = document.getElementById("signup-password").value;

            await axios.post("http://localhost:3000/signup",{
                username : username,
                password : password
            })
            alert("You are signed  !") 
        }
        async function signin(){
            const username = document.getElementById("signin-username").value;
            const password = document.getElementById("signin-password").value;

            const response = await axios.post("http://localhost:3000/signin",{
                username : username,
                password : password
            })
            localStorage.setItem("token",response.data.token)
            alert("You are signed in !") 
        }
        async function getUserInformation(){
            const response = await axios.get("http://localhost:3000/me",{
                headers:{
                    token : localStorage.getItem("token")
                }
            })
            document.getElementById("information").innerHTML = "username :"  +  response.data.username  + "password :"  + response.data.password
        }
        getUserInformation();
        function logout(){
            localStorage.removeItem("token")
        }
    </script>
    <title>Auth website</title>
</head>

<body>
    <div class="p-28">
        <div class="flex justify-between">
            <div id="card-1" class="h-[40vh] w-[40vw] bg-red-200 rounded-lg px-12">
                <h1 class="text-2xl font-bold text-center py-4">Signup</h1>
                <input id="signup-username" type="text" name="username" placeholder="username" class="border-1 w-[60%] mb-2 p-1" />
                <input id="signup-password" type="password" name="password" placeholder="password" class="border-1 w-[60%] p-1" />
                <br />
                <button onclick="signup()"
                    class="border-2 border-zinc-700 cursor-pointer mt-4 rounded-full px-4 h-8 w-28 bg-zinc-500 text-zinc-200">
                    Submit
                </button>
            </div>
            <div id="card-2" class="h-[40vh] w-[40vw] bg-red-200 rounded-lg px-12">
                <h1 class="text-2xl font-bold text-center py-4">Signin</h1>
                <input id="signin-username" type="text" name="username" placeholder="username" class="border-1 w-[60%] mb-2 p-1" />
                <input id="signin-password" type="password" name="password" placeholder="password" class="border-1 w-[60%] p-1" />
                <br />
                <button onclick="signin()"
                    class="border-2 border-zinc-700 cursor-pointer mt-4 rounded-full px-4 h-8 w-28 bg-zinc-500 text-zinc-200">
                    Submit
                </button>
            </div>
        </div>
        <div class="mt-20">
            <h3 class="text-xl font-semibold mb-2">User Information</h3>
            <div id="information" class="h-8"></div>
            <div>
                <button onclick="logout()" class="border-2 rounded-full px-8 py-1 text-md bg-zinc-200 cursor-pointer">
                    Logout
                </button>
            </div>
        </div>
    </div>
</body>

</html>